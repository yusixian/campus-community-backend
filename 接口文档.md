<!--
 * @Author: 41
 * @Date: 2022-02-15 17:53:43
 * @LastEditors: cos
 * @LastEditTime: 2022-02-19 20:25:31
 * @Description: 
-->
# 数据库
### 用户表
<<<<<<< HEAD
|字段名|字段类型| 说明|
|--|--|--|
|id|int|主键,自增|
|user_name|varchar(255)|用户名,unique|
|password|char(64)|密码|
|is_admin|tinyint(1)|0:不是管理员 1:是管理员|
### 文章表 sc_Articles

| 字段名    | 字段类型     | 允许为空 | 说明                    |
| --------- | ------------ | -------- | ----------------------- |
| id        | int          | N        | 文章id                  |
| user_id   | int          | N        | 发贴用户id              |
| user_name | varchar(255) | N        | 发贴用户名              |
| is_admin  | tinyint(1)   | N        | 0:不是管理员 1:是管理员 |
| title     | varchar(255) | N        | 文章标题                |
| summary   | varchar(255) | Y        | 文章摘要：纯文本        |
| content   | text         | N        | 文章详情：可以为富文本  |

=======
| 字段名    | 字段类型     | 说明                    |
| --------- | ------------ | ----------------------- |
| id        | int          | 主键,自增               |
| user_name | varchar(255) | 用户名,unique           |
| password  | char(64)     | 密码                    |
| is_admin  | tinyint(1)   | 0:不是管理员 1:是管理员 |
>>>>>>> 56e9f21589b154c9279f866f3e21b7cf678045c9
# 接口设计

### 用户模块
##### 注册接口
```bash
POST/users/register
```
- 请求参数
```
user_name,password
```
- 响应

**成功**
```JSON
{
  "code":0,
  "message":"用户注册成功",
  "result":{
    "id":2,
    "user_name":"user"
  }
}
```
**失败**
```JSON
{
  "code":"10001",
  "message":"用户名或密码不能为空",
  "result":""
}
{
  "code":"10002",
  "message":"用户已经存在",
  "result":""
}
{
  "code":"10003",
  "message":"用户注册失败",
  "result":""
}
```
***
##### 登录接口
```bash
POST/users/login
```
- 请求参数
```
user_name,password
```
- 响应

**成功**
```JSON
{
    "code": 0,
    "message": "用户登录成功",
    "result": {
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NCwidXNlcl9uYW1lIjoi5bCP5piOMiIsImlzX2FkbWluIjpmYWxzZSwiaWF0IjoxNjQ1MDc5NjA4LCJleHAiOjE2NDUxNjYwMDh9.-F905vX9_n3s7fZGkJVXuZ9Y1LRwLvvAAEG1j4gXB8E"
    }
}
```

**失败**
```JSON
{
  "code": "10004",
  "message": "用户不存在",
  "result": ""
}
{
  "code": "10005",
  "message": "用户登录失败",
  "result": ""
}
{
  "code": "10006",
  "message": "密码不匹配",
  "result": ""
}
```
***
##### 修改密码接口
- 请求参数
```
password
```
- 响应

**成功**
```JSON
{
  "code":0,
  "message":"修改密码成功",
  "result":""
}
```

**失败**
```JSON
{
  "code": "10101",
  "message": "token已过期",
  "result": ""
}
{
  "code": "10102",
  "message": "token无效",
  "result": ""
}
{
  "code": "10007",
  "message": "修改密码失败",
  "result": ""
}
```


## 发帖管理接口

### POST 发表文章

```bash
POST /articles/create
```

> Body 请求参数

```json
{
  "title": "【第二届青训营-寒假前端场】- 「Node.js 与前端开发实战」",
  "summary": "这节课从Node.js介绍起，实现了其编写Http Server的一个实战（并用Promise优化回调，还对SSR有了一定的了解），并在延伸话题里老师也给出了一些建议与拓展阅读，好欸~",
  "content": "早期的jQuery等库都是直接在页面中引入，后来模块化逐渐成熟，Node.js赋予了开发者在浏览器外运行代码的能力，前端逐渐模块化。一个常见场景：读取文件时。当Node.js执行I/O操作时，会在响应返回后恢复操作，而不是阻塞线程并占用额外内存等待。（内存占用更少）"
}
```

#### 请求参数

| 名称      | 位置 | 类型        | 必选  | 说明         |
| --------- | ---- | ----------- | ----- | ------------ |
| body      | body | object      | false | none         |
| » content | body | string      | true  | 可以是富文本 |
| » summary | body | string¦null | false | 文章摘要     |
| » title   | body | string      | true  | 文章标题     |

> 返回示例

> 成功

```json
{
    "code": 0,
    "message": "发帖成功！",
    "result": {
        "article_id": 2,
        "user_id": 1,
        "user_name": "admin",
        "title": "【第二届青训营-寒假前端场】- 「Node.js 与前端开发实战」"
    }
}
```

#### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

#### 返回数据结构

状态码 **200**

| 名称          | 类型    | 必选 | 约束 | 说明                   |
| ------------- | ------- | ---- | ---- | ---------------------- |
| » code        | integer | true | none | none                   |
| » message     | string  | true | none | 提示文本               |
| » result      | object  | true | none | 返回数据               |
| »» article_id | integer | true | none | 数据库中该文章所对应ID |
| »» user_id    | integer | true | none | 发帖用户名             |
| »» user_name  | string  | true | none | 发帖用户名             |
| »» title      | string  | true | none | 文章标题               |

### 分区表

| 字段名         | 字段类型     | 说明             |
| -------------- | ------------ | ---------------- |
| id             | int          | 主键,自增        |
| partition_name | varchar(255) | 分区的名称       |
| partition_desc | varchar(255) | 分区的描述       |
| cre_user_id    | int          | 创建分区的用户id |

### 分区模块
##### 创建分区接口
```bash
POST /partition/insertPartition
```
- 请求参数
```
partition_name,partition_desc
```
- 响应

**成功**
```JSON
{
    "code": 0,
    "message": "分区创建成功",
    "result": ""
}
```
**失败**
```JSON
{
  "code":"12001",
  "message":"创建分区失败",
  "result":""
}
{
  "code": "12002",
  "message": "分区已存在",
  "result": ""
}
{
  "code": "12003",
  "message": "分区名称不可以为空",
  "result": ""
}
```
***

##### 删除分区接口
```bash
DELETE /partition/deletePartition
```
- 请求参数
```
id
```
- 响应

**成功**
```JSON
{
    "code": 0,
    "message": "分区删除成功",
    "result": ""
}
```
**失败**
```JSON
{
  "code":"12004",
  "message":"分区删除失败",
  "result":""
}
{
  "code": "12005",
  "message": "分区id为空",
  "result": ""
}
```
***