<!--
 * @Author: 41
 * @Date: 2022-02-15 17:53:43
 * @LastEditors: lihao
 * @LastEditTime: 2022-03-03 22:00:06
 * @Description: 
-->
# 数据库
### 用户表
| 字段名    | 字段类型     | 说明                    |
| --------- | ------------ | ----------------------- |
| id        | int          | 主键,自增               |
| user_name | varchar(255) | 用户名,unique           |
| password  | char(64)     | 密码                    |
| is_admin  | tinyint(1)   | 0:不是管理员 1:是管理员 |
| img       | string       | 主键,自增               |
| is_active | tinyint(1)   | 是否激活                |
| name      | string       | 昵称                    |
| city      | string       | 城市                    |
| sex       | string       | 性别                    |

### 文章表 sc_Articles

| 字段名       | 字段类型     | 允许为空 | 说明                                         |
| ------------ | ------------ | -------- | -------------------------------------------- |
| id           | int          | N        | 文章id                                       |
| user_id      | int          | N        | 发贴用户id 外键                              |
| title        | varchar(255) | N        | 文章标题                                     |
| summary      | varchar(255) | Y        | 文章摘要：纯文本                             |
| content      | text         | N        | 文章详情：可以为富文本                       |
| partition_id | int          | N        | 分区号 外键                                  |
| likes        | int          | N        | 点赞数 初始为0                               |
| collections  | int          | N        | 收藏数 初始为0                               |
| visits       | int          | N        | 浏览数 初始为0                               |
| status       | int          | N        | 0已发布 1被屏蔽  2为已删除（回收站） 默认为0 |
| cover_url    | varchar(255) | Y        | 文章封面url，初始为空                        |

### 分区表

| 字段名         | 字段类型     | 说明             |
| -------------- | ------------ | ---------------- |
| id             | int          | 主键,自增        |
| partition_name | varchar(255) | 分区的名称       |
| partition_desc | varchar(255) | 分区的描述       |
| cre_user_id    | int          | 创建分区的用户id |

### 评论表
| 字段名          | 字段类型     | 说明           |
| --------------- | ------------ | -------------- |
| id              | int          | 主键,自增      |
| comment_content | varchar(255) | 评论的内容     |
| user_id         | int          | 写评论的用户id |
| article_id      | int          | 被评论的文章id |

### 点赞表 sc_Likes

| 字段名     | 字段类型 | 允许为空 | 说明                                               | 外键说明              |
| ---------- | -------- | -------- | -------------------------------------------------- | --------------------- |
| id         | int      | N        | 主键，自增 点赞记录id                              |                       |
| user_id    | int      | N        | 发起点赞的用户id                                   | User -> user_id       |
| type       | char(20) | N        | 点赞对象，默认值为article：article文章 comment评论 |                       |
| article_id | int      | Y        | 点赞文章id, type为article时存在                    | Article -> article_id |
| comment_id | int      | Y        | 点赞评论id, type为comment时存在                    | Comment -> comment_id |

### 收藏表sc_Collections

| 字段名     | 字段类型 | 允许为空 | 说明                  | 外键说明              |
| ---------- | -------- | -------- | --------------------- | --------------------- |
| id         | int      | N        | 主键，自增 收藏记录id |                       |
| user_id    | int      | N        | 进行收藏的用户id      | User -> user_id       |
| article_id | int      | N        | 收藏文章的id          | Article -> article_id |

# 接口设计

## 用户模块
### 注册接口
```bash
POST/users/register
```
- 请求参数
```
user_name,password
```
- 响应

**成功**
```JSON
{
  "code":0,
  "message":"用户注册成功",
  "result":{
    "id":2,
    "user_name":"user"
  }
}
```
**失败**

```JSON
{
  "code":"10001",
  "message":"用户名或密码不能为空",
  "result":""
}
{
  "code":"10002",
  "message":"用户已经存在",
  "result":""
}
{
  "code":"10003",
  "message":"用户注册失败",
  "result":""
}
```
***
### 登录接口
```bash
POST/users/login
```
- 请求参数
```
user_name,password
```
- 响应

**成功**
```JSON
{
    "code": 0,
    "message": "用户登录成功",
    "result": {
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NCwidXNlcl9uYW1lIjoi5bCP5piOMiIsImlzX2FkbWluIjpmYWxzZSwiaWF0IjoxNjQ1MDc5NjA4LCJleHAiOjE2NDUxNjYwMDh9.-F905vX9_n3s7fZGkJVXuZ9Y1LRwLvvAAEG1j4gXB8E"
    }
}
```

**失败**
```JSON
{
  "code": "10004",
  "message": "用户不存在",
  "result": ""
}
{
  "code": "10005",
  "message": "用户登录失败",
  "result": ""
}
{
  "code": "10006",
  "message": "密码不匹配",
  "result": ""
}
```
***
### 修改密码接口
- 请求参数
```
password
```
- 响应

**成功**
```JSON
{
  "code":0,
  "message":"修改密码成功",
  "result":""
}
```

**失败**

```JSON
{
  "code": "10101",
  "message": "token已过期",
  "result": ""
}
{
  "code": "10102",
  "message": "token无效",
  "result": ""
}
{
  "code": "10007",
  "message": "修改密码失败",
  "result": ""
}
```

---



# 发帖管理接口

## PATCH 更新文章

PATCH /articles/update

> Body 请求参数

```json
{
  "article_id": 3,
  "content": "业派较定般感心意少快由话。水合理它价数及四精持白把切。性场很单导化然规证力空数即该历。资照龙无认状战件属经百力格设。取下团经现步带照速别己切。",
  "summary": "8ai4",
  "partition_id": 2,
  "cover_url": "http://dnjej.cq/upyfnrkcv",
  "title": "Snvw Njdn Qousdg Mpbz"
}
```

### 请求参数

| 名称           | 位置 | 类型        | 必选  | 说明                       |
| -------------- | ---- | ----------- | ----- | -------------------------- |
| body           | body | object      | false | none                       |
| » content      | body | string      | false | 更新后的内容，可以是富文本 |
| » summary      | body | string¦null | false | 更新后的文章摘要           |
| » title        | body | string      | false | 更新后的文章标题           |
| » article_id   | body | integer     | true  | 待更新文章ID               |
| » partition_id | body | integer     | false | 新分区ID                   |
| » cover_url    | body | string      | false | 新头图地址                 |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "更新文章成功！"
}
```

> 请求有误

```json
{
  "code": 11000,
  "message": "文章id不可以为空"
}
```

> 记录不存在

```json
{
  "code": 11004,
  "message": "该文章不存在！"
}
```

### 返回结果

| 状态码 | 状态码含义                                                       | 说明       | 数据模型 |
| ------ | ---------------------------------------------------------------- | ---------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)          | 成功       | Inline   |
| 400    | [Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1) | 请求有误   | Inline   |
| 404    | [Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4)   | 记录不存在 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选 | 约束 | 说明     |
| --------- | ------- | ---- | ---- | -------- |
| » code    | integer | true | none | none     |
| » message | string  | true | none | 提示文本 |

状态码 **400**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

状态码 **404**

| 名称      | 类型    | 必选 | 约束 | 说明     |
| --------- | ------- | ---- | ---- | -------- |
| » code    | integer | true | none | 错误码   |
| » message | string  | true | none | 提示信息 |

## POST 发表文章

POST /articles/create

支持头图、分区选择，注意图片上传通过articles/upload接口上传（开发中）而分区id发送前需确保该分区已经存在了

> Body 请求参数

```json
{
  "content": "确么运低由育力为光些下群除已计能究。两至石江发步料间极命切物道青。年科圆都立从少王图增整众断百。专军前角他在想目定引长运须原确。那江会龙线干解全展广参志西因原看半江。标场家合中完选马上正情角里制。",
  "title": "现王下共五什设",
  "partition_id": 1,
  "cover_url": "http://ktyfht.lv/dodg",
  "summary": "面派再一达对调我率提色及。"
}
```

### 请求参数

| 名称           | 位置 | 类型        | 必选  | 说明                                    |
| -------------- | ---- | ----------- | ----- | --------------------------------------- |
| body           | body | object      | false | none                                    |
| » content      | body | string      | true  | 可以是富文本                            |
| » summary      | body | string¦null | false | 文章摘要                                |
| » title        | body | string      | true  | 文章标题                                |
| » partition_id | body | integer     | false | 不传则为默认分区，id为1                 |
| » cover_url    | body | string¦null | false | 文章头图的url，通过上传接口可以进行上传 |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "发帖成功！",
  "result": {
    "article_id": 5,
    "user_id": 1,
    "partition_id": 1,
    "title": "【第二届青训营-寒假前端场】- 「Node.js 与前端开发实战」"
  }
}
```

> 请求有误

```json
{
  "code": 11003,
  "message": "文章标题或内容为空"
}
```

> 所属分区不存在

```json
{
  "code": 12007,
  "message": "分区不存在"
}
```

### 返回结果

| 状态码 | 状态码含义                                                       | 说明           | 数据模型 |
| ------ | ---------------------------------------------------------------- | -------------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)          | 成功           | Inline   |
| 400    | [Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1) | 请求有误       | Inline   |
| 404    | [Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4)   | 所属分区不存在 | Inline   |

### 返回数据结构

状态码 **200**

| 名称            | 类型    | 必选 | 约束 | 说明                   |
| --------------- | ------- | ---- | ---- | ---------------------- |
| » code          | integer | true | none | none                   |
| » message       | string  | true | none | 提示文本               |
| » result        | object  | true | none | 返回数据               |
| »» article_id   | integer | true | none | 数据库中该文章所对应ID |
| »» user_id      | integer | true | none | 发帖用户名             |
| »» partition_id | integer | true | none | 该文章所处分区ID       |
| »» title        | string  | true | none | 该文章标题             |

状态码 **400**

| 名称      | 类型    | 必选 | 约束 | 说明     |
| --------- | ------- | ---- | ---- | -------- |
| » code    | integer | true | none | 错误码   |
| » message | string  | true | none | 提示信息 |

状态码 **404**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

## DELETE 删除文章

DELETE /articles/delete

根据文章id删除文章，注意，此处是软删除，后续可加入定期清理

### 请求参数

| 名称       | 位置  | 类型   | 必选 | 说明         |
| ---------- | ----- | ------ | ---- | ------------ |
| article_id | query | string | true | 待删除文章ID |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "删除文章成功！"
}
```

> 请求有误

```json
{
  "code": 11000,
  "message": "文章id不可以为空"
}
```

> 记录不存在

```json
{
  "code": 11004,
  "message": "该文章不存在！"
}
```

### 返回结果

| 状态码 | 状态码含义                                                       | 说明       | 数据模型 |
| ------ | ---------------------------------------------------------------- | ---------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)          | 成功       | Inline   |
| 400    | [Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1) | 请求有误   | Inline   |
| 404    | [Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4)   | 记录不存在 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选 | 约束 | 说明     |
| --------- | ------- | ---- | ---- | -------- |
| » code    | integer | true | none | none     |
| » message | string  | true | none | 提示文本 |

状态码 **400**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

状态码 **404**

| 名称      | 类型    | 必选 | 约束 | 说明     |
| --------- | ------- | ---- | ---- | -------- |
| » code    | integer | true | none | 错误码   |
| » message | string  | true | none | 提示语句 |

## GET 分页获取文章（前台）

GET /articles/public/page

分页获取文章，支持通过自定义分页大小、每页数量
可根据分区号、开始结束时间等进行过滤
只获取已发布文章

### 请求参数

| 名称         | 位置  | 类型   | 必选  | 说明                              |
| ------------ | ----- | ------ | ----- | --------------------------------- |
| current      | query | string | false | 当前页数 默认第1页                |
| size         | query | string | false | 每页数目 默认为10篇文章           |
| partition_id | query | string | false | 分区ID 不传则不筛选分区           |
| start_time   | query | string | false | 开始日期 查找大于这个时间段的文章 |
| end_time     | query | string | false | 结束日期 查找小于这个时间段的文章 |
| user_id      | query | string | false | 获取某用户发表文章                |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "获取文章成功！",
  "result": {
    "article_total": 6,
    "article_pages": 1,
    "article_list": [
      {
        "id": 2,
        "user_id": 1,
        "title": "做料引",
        "summary": "性始水代教术现斯比交前矿。",
        "content": "向外路派装济历二二向由部体却具由思更。须石线增市由克义石离很会把以派问好者。八因济片影过图力节水合别。气任标则况所你十使则其受西间。京表从极音会将消战商件民验所。",
        "partition_id": 1,
        "likes": 1,
        "collections": 0,
        "visits": 0,
        "status": 0,
        "cover_url": "",
        "createdAt": "2022-02-22T18:01:50.000Z",
        "updatedAt": "2022-02-25T08:14:48.000Z",
        "deletedAt": null,
        "user_name": "admin"
      },
      // ...略
      {
        "id": 152,
        "user_id": 1,
        "title": "【第二届青训营-寒假前端场】- 「Node.js 与前端开发实战」",
        "summary": "这节课从Node.js介绍起，实现了其编写Http Server的一个实战（并用Promise优化回调，还对SSR有了一定的了解），并在延伸话题里老师也给出了一些建议与拓展阅读，好欸~",
        "content": "早期的jQuery等库都是直接在页面中引入，后来模块化逐渐成熟，Node.js赋予了开发者在浏览器外运行代码的能力，前端逐渐模块化。一个常见场景：读取文件时。当Node.js执行I/O操作时，会在响应返回后恢复操作，而不是阻塞线程并占用额外内存等待。（内存占用更少）",
        "partition_id": 1,
        "likes": 0,
        "collections": 0,
        "visits": 0,
        "status": 0,
        "cover_url": "",
        "createdAt": "2022-02-24T11:15:28.000Z",
        "updatedAt": "2022-02-24T11:15:28.000Z",
        "deletedAt": null,
        "user_name": "admin"
      }
    ]
  }
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称             | 类型                                | 必选  | 约束 | 说明                 |
| ---------------- | ----------------------------------- | ----- | ---- | -------------------- |
| » code           | integer                             | true  | none | none                 |
| » message        | string                              | true  | none | none                 |
| » result         | object                              | true  | none | none                 |
| »» article_total | integer                             | true  | none | 符合条件的文章总数   |
| »» article_pages | integer                             | true  | none | 符合条件的文章总页数 |
| »» article_list  | [[sc_articles](#schemasc_articles)] | true  | none | 当前页文章列表       |
| »»» id           | integer                             | true  | none | none                 |
| »»» user_id      | integer                             | true  | none | none                 |
| »»» title        | string                              | true  | none | none                 |
| »»» summary      | string¦null                         | false | none | none                 |
| »»» content      | string                              | true  | none | 可以为富文本         |
| »»» partition_id | integer                             | true  | none | none                 |
| »»» cover_url    | string¦null                         | false | none | none                 |
| »»» likes        | integer                             | true  | none | none                 |
| »»» collections  | integer                             | true  | none | none                 |
| »»» visits       | integer                             | true  | none | none                 |
| »»» createdAt    | string                              | true  | none | none                 |
| »»» updatedAt    | string                              | true  | none | none                 |
| »»» deletedAt    | any                                 | true  | none | none                 |

*anyOf*

| 名称             | 类型   | 必选  | 约束 | 说明 |
| ---------------- | ------ | ----- | ---- | ---- |
| »»»» *anonymous* | string | false | none | none |

*or*

| 名称             | 类型 | 必选  | 约束 | 说明 |
| ---------------- | ---- | ----- | ---- | ---- |
| »»»» *anonymous* | null | false | none | none |

*continued*

| 名称          | 类型        | 必选  | 约束 | 说明                           |
| ------------- | ----------- | ----- | ---- | ------------------------------ |
| »»» status    | integer     | true  | none | 默认为0已发布，1被屏蔽 2已删除 |
| »»» user_name | string¦null | false | none | 发贴用户名                     |

## POST 文章图片上传

POST /articles/uploads

文章内图片上传

> Body 请求参数

```yaml
file:
  - file://C:\Users\34504\OneDrive - nahcox\图片\壁纸\89219826_p0_waifu2x_4x_jpg.png
  - file://C:\Users\34504\OneDrive - nahcox\图片\壁纸\95446530_p0.png

```

### 请求参数

| 名称   | 位置 | 类型           | 必选  | 说明     |
| ------ | ---- | -------------- | ----- | -------- |
| body   | body | object         | false | none     |
| » file | body | string(binary) | false | 图片列表 |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "文章图片上传成功",
  "result": {
    "imgPaths": [
      "/uploads/upload_5f601490b4e8c2a61d0ab7e7a15215c5.png",
      "/uploads/upload_4042adb1850fc75940116745c099ac5f.png",
      "/uploads/upload_61e41d38a810f63d4741f8389dcd0e31.png"
    ]
  }
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称        | 类型     | 必选 | 约束 | 说明              |
| ----------- | -------- | ---- | ---- | ----------------- |
| » code      | integer  | true | none | none              |
| » message   | string   | true | none | none              |
| » result    | object   | true | none | none              |
| »» imgPaths | [string] | true | none | 上传后图片url数组 |

## GET 根据文章id获取文章

GET /articles/getbyid

注意！！！被屏蔽的也可被获取到，被删除的无法获取到
获取后增加文章浏览量 +1

### 请求参数

| 名称       | 位置  | 类型   | 必选 | 说明                 |
| ---------- | ----- | ------ | ---- | -------------------- |
| article_id | query | string | true | 根据此id获取文章信息 |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "获取文章成功！",
  "result": {
    "id": 3,
    "user_id": 1,
    "title": "Snvw Njdn Qousdg Mpbz",
    "summary": "8ai4",
    "content": "ssssssssssssss",
    "partition_id": 2,
    "likes": 1,
    "collections": 0,
    "visits": 8,
    "status": 0,
    "cover_url": "http://dnjej.cq/upyfnrkcv",
    "createdAt": "2022-02-22T18:01:50.000Z",
    "updatedAt": "2022-03-01T09:06:04.000Z",
    "deletedAt": null,
    "user_name": "admin"
  }
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称            | 类型                              | 必选  | 约束 | 说明         |
| --------------- | --------------------------------- | ----- | ---- | ------------ |
| » code          | integer                           | true  | none | none         |
| » message       | string                            | true  | none | none         |
| » result        | [sc_articles](#schemasc_articles) | true  | none | none         |
| »» id           | integer                           | true  | none | none         |
| »» user_id      | integer                           | true  | none | none         |
| »» title        | string                            | true  | none | none         |
| »» summary      | string¦null                       | false | none | none         |
| »» content      | string                            | true  | none | 可以为富文本 |
| »» partition_id | integer                           | true  | none | none         |
| »» cover_url    | string¦null                       | false | none | none         |
| »» likes        | integer                           | true  | none | none         |
| »» collections  | integer                           | true  | none | none         |
| »» visits       | integer                           | true  | none | none         |
| »» createdAt    | string                            | true  | none | none         |
| »» updatedAt    | string                            | true  | none | none         |
| »» deletedAt    | any                               | true  | none | none         |

*anyOf*

| 名称            | 类型   | 必选  | 约束 | 说明 |
| --------------- | ------ | ----- | ---- | ---- |
| »»» *anonymous* | string | false | none | none |

*or*

| 名称            | 类型 | 必选  | 约束 | 说明 |
| --------------- | ---- | ----- | ---- | ---- |
| »»» *anonymous* | null | false | none | none |

*continued*

| 名称         | 类型        | 必选  | 约束 | 说明                           |
| ------------ | ----------- | ----- | ---- | ------------------------------ |
| »» status    | integer     | true  | none | 默认为0已发布，1被屏蔽 2已删除 |
| »» user_name | string¦null | false | none | 发贴用户名                     |

## GET 获取文章总数

GET /articles/count

可根据分区号、状态、开始结束时间进行过滤，获取文章总数
不传status则获取0、1即已发布与被屏蔽文章数，不获取回收站文章

### 请求参数

| 名称         | 位置  | 类型   | 必选  | 说明                                                     |
| ------------ | ----- | ------ | ----- | -------------------------------------------------------- |
| status       | query | string | false | 文章状态 不传则为能查到0&1 0已发布  1为未发布、2为回收站 |
| partition_id | query | string | false | 分区ID 不传则不筛选分区                                  |
| start_time   | query | string | false | 开始日期 查找大于这个时间段的文章                        |
| end_time     | query | string | false | 结束日期 查找小于这个时间段的文章                        |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "获取文章总数",
  "result": {
    "filterOpt": {
      "partition_id": 1,
      "start_time": "2022-02-23 17:58:53",
      "end_time": "2022-02-24 18:01:51",
      "status": 0
    },
    "count": 30
  }
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称             | 类型    | 必选  | 约束 | 说明                           |
| ---------------- | ------- | ----- | ---- | ------------------------------ |
| » code           | integer | true  | none | none                           |
| » message        | string  | true  | none | none                           |
| » result         | object  | true  | none | none                           |
| »» filterOpt     | object  | true  | none | none                           |
| »»» partition_id | integer | false | none | none                           |
| »»» start_time   | string  | false | none | none                           |
| »»» end_time     | string  | false | none | none                           |
| »»» status       | integer | false | none | none                           |
| »» count         | integer | true  | none | 根据过滤参数计算而得的文章总数 |

# 发帖管理接口/管理员接口

## DELETE 屏蔽文章

DELETE /articles/shield

仅管理员可用！

### 请求参数

| 名称       | 位置  | 类型   | 必选  | 说明         |
| ---------- | ----- | ------ | ----- | ------------ |
| article_id | query | string | false | 待屏蔽文章id |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "屏蔽该文章成功！"
}
```

> 禁止访问

```json
{
  "code": 10103,
  "message": "未授权,当前请求需要管理员权限"
}
```

> 记录不存在

```json
{
  "code": 11004,
  "message": "该文章不存在！"
}
```

### 返回结果

| 状态码 | 状态码含义                                                     | 说明       | 数据模型 |
| ------ | -------------------------------------------------------------- | ---------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)        | 成功       | Inline   |
| 403    | [Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3) | 禁止访问   | Inline   |
| 404    | [Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4) | 记录不存在 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

状态码 **403**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |
| » result  | string  | true | none | none |

状态码 **404**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

## POST 恢复文章

POST /articles/restore

仅管理员可用！
分为恢复被屏蔽文章和恢复被删除文章，默认为恢复被屏蔽文章，传参数isDel=1则为恢复回收站文章

### 请求参数

| 名称       | 位置  | 类型   | 必选  | 说明                                              |
| ---------- | ----- | ------ | ----- | ------------------------------------------------- |
| article_id | query | string | true  | none                                              |
| isDel      | query | string | false | 不传或传0则为恢复被屏蔽文章，否则为恢复被删除文章 |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "恢复该文章成功！"
}
```

> 禁止访问

```json
{
  "code": 10103,
  "message": "未授权,当前请求需要管理员权限"
}
```

> 记录不存在

```json
{
  "code": 11004,
  "message": "该文章不存在！"
}
```

### 返回结果

| 状态码 | 状态码含义                                                                 | 说明       | 数据模型 |
| ------ | -------------------------------------------------------------------------- | ---------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)                    | 成功       | Inline   |
| 403    | [Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3)             | 禁止访问   | Inline   |
| 404    | [Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4)             | 记录不存在 | Inline   |
| 500    | [Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1) | 服务器错误 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

状态码 **403**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

状态码 **404**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

状态码 **500**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

## GET 获取所有文章

GET /articles/getlist

包括被屏蔽的文章，被删除的文章无法获取，需要管理员权限！

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "获取文章列表成功！",
  "result": [
    {
      "id": 1,
      "user_id": 1,
      "title": "现王下共五什设",
      "summary": "面派再一达对调我率提色及。",
      "content": "确么运低由育力为光些下群除已计能究。两至石江发步料间极命切物道青。年科圆都立从少王图增整众断百。专军前角他在想目定引长运须原确。那江会龙线干解全展广参志西因原看半江。标场家合中完选马上正情角里制。",
      "partition_id": 1,
      "likes": 0,
      "collections": 0,
      "visits": 0,
      "status": 0,
      "cover_url": "http://ktyfht.lv/dodg",
      "createdAt": "2022-02-22T17:58:53.000Z",
      "updatedAt": "2022-02-22T17:58:53.000Z",
      "deletedAt": null
    }
  ]
}
```

> 禁止访问

```json
{
  "code": 10103,
  "message": "未授权,当前请求需要管理员权限"
}
```

### 返回结果

| 状态码 | 状态码含义                                                     | 说明     | 数据模型 |
| ------ | -------------------------------------------------------------- | -------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)        | 成功     | Inline   |
| 403    | [Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3) | 禁止访问 | Inline   |

### 返回数据结构

状态码 **200**

| 名称            | 类型        | 必选 | 约束 | 说明          |
| --------------- | ----------- | ---- | ---- | ------------- |
| » code          | integer     | true | none | none          |
| » message       | string      | true | none | none          |
| » result        | [object]    | true | none | none          |
| »» id           | integer     | true | none | none          |
| »» user_id      | integer     | true | none | 外键          |
| »» title        | string      | true | none | none          |
| »» summary      | string¦null | true | none | none          |
| »» content      | string      | true | none | none          |
| »» partition_id | integer     | true | none | 外键          |
| »» likes        | integer     | true | none | none          |
| »» collections  | integer     | true | none | none          |
| »» visits       | integer     | true | none | none          |
| »» status       | integer     | true | none | 0正常 1被屏蔽 |
| »» cover_url    | string¦null | true | none | none          |
| »» createdAt    | string      | true | none | 文章发表时间  |
| »» updatedAt    | string      | true | none | none          |
| »» deletedAt    | null        | true | none | 只会为null    |

状态码 **403**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

## GET 分页获取文章（后台）

GET /articles/page

分页获取文章，支持通过自定义分页大小、每页数量
可根据分区号、状态、开始结束时间进行过滤

### 请求参数

| 名称         | 位置  | 类型   | 必选  | 说明                                                     |
| ------------ | ----- | ------ | ----- | -------------------------------------------------------- |
| current      | query | string | false | 当前页数 默认第1页                                       |
| size         | query | string | false | 每页数目 默认为10篇文章                                  |
| status       | query | string | false | 文章状态 不传则为能查到0&1 0已发布  1为被屏蔽、2为回收站 |
| partition_id | query | string | false | 分区ID 不传则不筛选分区                                  |
| start_time   | query | string | false | 开始日期 查找大于这个时间段的文章                        |
| end_time     | query | string | false | 结束日期 查找小于这个时间段的文章                        |
| user_id      | query | string | false | 获取某用户发表文章                                       |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "获取文章成功！",
  "result": {
    "article_total": 133,
    "article_pages": 14,
    "article_list": [
      {
        "id": 2,
        "user_id": 1,
        "title": "做料引",
        "summary": "性始水代教术现斯比交前矿。",
        "content": "向外路派装济历二二向由部体却具由思更。须石线增市由克义石离很会把以派问好者。八因济片影过图力节水合别。气任标则况所你十使则其受西间。京表从极音会将消战商件民验所。",
        "partition_id": 1,
        "likes": 1,
        "collections": 0,
        "visits": 0,
        "status": 0,
        "cover_url": "",
        "createdAt": "2022-02-22T18:01:50.000Z",
        "updatedAt": "2022-02-25T08:14:48.000Z",
        "deletedAt": null,
        "user_name": "admin"
      },
      // ...略
      {
        "id": 11,
        "user_id": 2,
        "title": "角线构图认",
        "summary": "加满直非路同边家候眼后每位布响置。",
        "content": "向飞听山造亲争产阶术四得商相。根增解再必更相快术空质空查。非等然低龙期研新老确本步组。响石准果难示根能发派书质铁。",
        "partition_id": 1,
        "likes": 0,
        "collections": 0,
        "visits": 0,
        "status": 0,
        "cover_url": "",
        "createdAt": "2022-02-24T06:50:23.000Z",
        "updatedAt": "2022-02-24T06:50:23.000Z",
        "deletedAt": null,
        "user_name": "cos"
      }
    ]
  }
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称             | 类型                                | 必选  | 约束 | 说明                 |
| ---------------- | ----------------------------------- | ----- | ---- | -------------------- |
| » code           | integer                             | true  | none | none                 |
| » message        | string                              | true  | none | none                 |
| » result         | object                              | true  | none | none                 |
| »» article_total | integer                             | true  | none | 符合条件的文章总数   |
| »» article_pages | integer                             | true  | none | 符合条件的文章总页数 |
| »» article_list  | [[sc_articles](#schemasc_articles)] | true  | none | 当前页文章列表       |
| »»» id           | integer                             | true  | none | none                 |
| »»» user_id      | integer                             | true  | none | none                 |
| »»» title        | string                              | true  | none | none                 |
| »»» summary      | string¦null                         | false | none | none                 |
| »»» content      | string                              | true  | none | 可以为富文本         |
| »»» partition_id | integer                             | true  | none | none                 |
| »»» cover_url    | string¦null                         | false | none | none                 |
| »»» likes        | integer                             | true  | none | none                 |
| »»» collections  | integer                             | true  | none | none                 |
| »»» visits       | integer                             | true  | none | none                 |
| »»» createdAt    | string                              | true  | none | none                 |
| »»» updatedAt    | string                              | true  | none | none                 |
| »»» deletedAt    | any                                 | true  | none | none                 |

*anyOf*

| 名称             | 类型   | 必选  | 约束 | 说明 |
| ---------------- | ------ | ----- | ---- | ---- |
| »»»» *anonymous* | string | false | none | none |

*or*

| 名称             | 类型 | 必选  | 约束 | 说明 |
| ---------------- | ---- | ----- | ---- | ---- |
| »»»» *anonymous* | null | false | none | none |

*continued*

| 名称          | 类型        | 必选  | 约束 | 说明                           |
| ------------- | ----------- | ----- | ---- | ------------------------------ |
| »»» status    | integer     | true  | none | 默认为0已发布，1被屏蔽 2已删除 |
| »»» user_name | string¦null | false | none | 发贴用户名                     |

# 数据模型

<h2 id="tocS_sc_articles">sc_articles</h2>

<a id="schemasc_articles"></a>
<a id="schema_sc_articles"></a>
<a id="tocSsc_articles"></a>
<a id="tocssc_articles"></a>

```json
{
  "id": 0,
  "user_id": 0,
  "title": "string",
  "summary": "string",
  "content": "string",
  "partition_id": 0,
  "cover_url": "string",
  "likes": 0,
  "collections": 0,
  "visits": 0,
  "createdAt": "string",
  "updatedAt": "string",
  "deletedAt": "string",
  "status": 0,
  "user_name": "string"
}

```

### 属性

| 名称         | 类型        | 必选  | 约束 | 说明         |
| ------------ | ----------- | ----- | ---- | ------------ |
| id           | integer     | true  | none | none         |
| user_id      | integer     | true  | none | none         |
| title        | string      | true  | none | none         |
| summary      | string¦null | false | none | none         |
| content      | string      | true  | none | 可以为富文本 |
| partition_id | integer     | true  | none | none         |
| cover_url    | string¦null | false | none | none         |
| likes        | integer     | true  | none | none         |
| collections  | integer     | true  | none | none         |
| visits       | integer     | true  | none | none         |
| createdAt    | string      | true  | none | none         |
| updatedAt    | string      | true  | none | none         |
| deletedAt    | any         | true  | none | none         |

anyOf

| 名称          | 类型   | 必选  | 约束 | 说明 |
| ------------- | ------ | ----- | ---- | ---- |
| » *anonymous* | string | false | none | none |

or

| 名称          | 类型 | 必选  | 约束 | 说明 |
| ------------- | ---- | ----- | ---- | ---- |
| » *anonymous* | null | false | none | none |

continued

| 名称      | 类型    | 必选  | 约束 | 说明                           |
| --------- | ------- | ----- | ---- | ------------------------------ |
| status    | integer | true  | none | 默认为0已发布，1被屏蔽 2已删除 |
| user_name | string  | false | none | 发贴用户名                     |
| comments  | integer | false | none | 该文章评论数                   |



# 分区接口

## GET 查询所有分区

GET /partition/queryAllPartition

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "查询所有分区成功",
  "result": [
    {
      "id": 1,
      "partition_name": "分区测试",
      "partition_desc": "用于测试分区模块",
      "cre_user_id": 1,
      "createdAt": "2022-02-21T10:26:11.000Z",
      "updatedAt": "2022-02-21T10:26:11.000Z"
    }
  ]
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选  | 约束 | 说明 |
| --------- | ------- | ----- | ---- | ---- |
| » code    | integer | true  | none | none |
| » message | string  | true  | none | none |
| » result  | object  | false | none | none |

## POST 创建分区接口

POST /partition/insertPartition

> Body 请求参数

```json
{
  "partition_name": "分区测试",
  "partition_desc": "用于测试分区模块"
}
```

### 请求参数

| 名称             | 位置 | 类型   | 必选  | 说明     |
| ---------------- | ---- | ------ | ----- | -------- |
| body             | body | object | false | none     |
| » partition_name | body | string | true  | 分区名称 |
| » partition_desc | body | string | true  | 分区描述 |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "分区创建成功",
  "result": ""
}
```

```json
{
  "code": "12001",
  "message": "创建分区失败",
  "result": ""
}
```

```json
{
  "code": "12002",
  "message": "分区名称已存在",
  "result": ""
}
```

```json
{
  "code": "12003",
  "message": "分区名称不可以为空",
  "result": ""
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选  | 约束 | 说明 |
| --------- | ------- | ----- | ---- | ---- |
| » code    | integer | true  | none | none |
| » message | string  | true  | none | none |
| » result  | object  | false | none | none |

## DELETE 删除分区接口

DELETE /partition/deletePartition

### 请求参数

| 名称 | 位置  | 类型   | 必选  | 说明 |
| ---- | ----- | ------ | ----- | ---- |
| id   | query | string | false | none |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "分区删除成功",
  "result": ""
}
```

```json
{
  "code": "12004",
  "message": "分区删除失败",
  "result": ""
}
```

```json
{
  "code": "12005",
  "message": "分区id为空",
  "result": ""
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选  | 约束 | 说明 |
| --------- | ------- | ----- | ---- | ---- |
| » code    | integer | true  | none | none |
| » message | string  | true  | none | none |
| » result  | object  | false | none | none |

# 评论接口

## GET 根据文章id获取评论

GET /comment/queryCommentByArticleId

### 请求参数

| 名称 | 位置  | 类型   | 必选  | 说明 |
| ---- | ----- | ------ | ----- | ---- |
| id   | query | string | false | none |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "查询评论成功",
  "result": [
    {
      "id": 1,
      "comment_content": "哈哈哈",
      "user_id": 1,
      "article_id": 1,
      "createdAt": "2022-02-21T07:52:58.000Z",
      "updatedAt": "2022-02-21T07:52:58.000Z",
      "deletedAt": null
    },
    {
      "id": 2,
      "comment_content": "哈哈哈",
      "user_id": 1,
      "article_id": 1,
      "createdAt": "2022-02-21T08:35:31.000Z",
      "updatedAt": "2022-02-21T08:35:31.000Z",
      "deletedAt": null
    },
    {
      "id": 3,
      "comment_content": "哈哈哈2",
      "user_id": 1,
      "article_id": 1,
      "createdAt": "2022-02-21T08:36:50.000Z",
      "updatedAt": "2022-02-21T08:36:50.000Z",
      "deletedAt": null
    }
  ]
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型     | 必选  | 约束 | 说明 |
| --------- | -------- | ----- | ---- | ---- |
| » code    | integer  | true  | none | none |
| » message | string   | true  | none | none |
| » result  | [object] | false | none | none |

## POST 新增评论的接口

POST /comment/createComment

> Body 请求参数

```json
{
  "comment_content": "string",
  "article_id": 0
}
```

### 请求参数

| 名称              | 位置 | 类型    | 必选  | 说明 |
| ----------------- | ---- | ------- | ----- | ---- |
| body              | body | object  | false | none |
| » comment_content | body | string  | true  | none |
| » article_id      | body | integer | true  | none |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "评论成功",
  "result": ""
}
```

```json
{
  "code": "13002",
  "message": "评论内容和评论文章不可以为空",
  "result": ""
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选  | 约束 | 说明 |
| --------- | ------- | ----- | ---- | ---- |
| » code    | integer | true  | none | none |
| » message | string  | true  | none | none |
| » result  | object  | false | none | none |

## DELETE 批量删除评论

DELETE /comment/delBatchCommentByIds

### 请求参数

| 名称 | 位置  | 类型   | 必选  | 说明 |
| ---- | ----- | ------ | ----- | ---- |
| ids  | query | string | false | none |

> 返回示例

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

## DELETE 删除评论

DELETE /comment/deleteComment

### 请求参数

| 名称 | 位置  | 类型   | 必选  | 说明 |
| ---- | ----- | ------ | ----- | ---- |
| id   | query | string | false | none |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "删除评论成功",
  "result": ""
}
```

```json
{
  "code": "13003",
  "message": "评论id不可以为空",
  "result": ""
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选  | 约束 | 说明 |
| --------- | ------- | ----- | ---- | ---- |
| » code    | integer | true  | none | none |
| » message | string  | true  | none | none |
| » result  | object  | false | none | none |

## GET 查询评论数量的接口

GET /comment/queryCommentCountByArticleId

### 请求参数

| 名称 | 位置  | 类型   | 必选 | 说明 |
| ---- | ----- | ------ | ---- | ---- |
| id   | query | string | true | none |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "文章评论数量查询成功",
  "result": {
    "commentCount": 1
  }
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选  | 约束 | 说明 |
| --------- | ------- | ----- | ---- | ---- |
| » code    | integer | true  | none | none |
| » message | string  | true  | none | none |
| » result  | object  | false | none | none |



# 评论回复接口

## POST 回复评论

POST /commentReply/insertCommentReply

> Body 请求参数

```json
{
  "comment_id": 0,
  "comment_reply_id": 0,
  "comment_reply_content": "string",
  "to_user_id": 0
}
```

### 请求参数

| 名称                    | 位置 | 类型    | 必选  | 说明 |
| ----------------------- | ---- | ------- | ----- | ---- |
| body                    | body | object  | false | none |
| » comment_id            | body | integer | true  | none |
| » comment_reply_id      | body | integer | false | none |
| » comment_reply_content | body | string  | true  | none |
| » to_user_id            | body | integer | true  | none |

> 返回示例

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

## DELETE 删除评论回复

DELETE /commentReply/deleteCommentReply

### 请求参数

| 名称 | 位置  | 类型   | 必选 | 说明 |
| ---- | ----- | ------ | ---- | ---- |
| id   | query | string | true | none |

> 返回示例

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

# 收藏接口

## GET 获取文章收藏列表

GET /collections/getlist

返回文章列表

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "获取收藏数成功！",
  "result": [
    {
      "id": 1,
      "user_id": 1,
      "article_id": 1,
      "createdAt": "2022-03-02T04:30:47.000Z",
      "updatedAt": "2022-03-02T04:30:47.000Z",
      "userInfo": {
        "avator": "/uploads/upload_69e540ce9e6369c272dbe5a20d993a69.jpg",
        "user_name": "admin"
      }
    },
    {
      "id": 3,
      "user_id": 1,
      "article_id": 11,
      "createdAt": "2022-03-02T04:32:21.000Z",
      "updatedAt": "2022-03-02T04:32:21.000Z",
      "userInfo": {
        "avator": "/uploads/upload_69e540ce9e6369c272dbe5a20d993a69.jpg",
        "user_name": "admin"
      },
      "articleInfo": {
        "id": 11,
        "user_id": 2,
        "title": "角线构图认",
        "summary": "加满直非路同边家候眼后每位布响置。",
        "content": "向飞听山造亲争产阶术四得商相。根增解再必更相快术空质空查。非等然低龙期研新老确本步组。响石准果难示根能发派书质铁。",
        "partition_id": 1,
        "likes": 0,
        "collections": 0,
        "visits": 0,
        "cover_url": "",
        "createdAt": "2022-02-24T06:50:23.000Z",
        "updatedAt": "2022-02-24T06:50:23.000Z"
      }
    },
    {
      "id": 4,
      "user_id": 1,
      "article_id": 3,
      "createdAt": "2022-03-02T04:32:28.000Z",
      "updatedAt": "2022-03-02T04:32:28.000Z",
      "userInfo": {
        "avator": "/uploads/upload_69e540ce9e6369c272dbe5a20d993a69.jpg",
        "user_name": "admin"
      },
      "articleInfo": {
        "id": 3,
        "user_id": 1,
        "title": "Snvw Njdn Qousdg Mpbz",
        "summary": "8ai4",
        "content": "ssssssssssssss",
        "partition_id": 2,
        "likes": 1,
        "collections": 0,
        "visits": 13,
        "cover_url": "http://dnjej.cq/upyfnrkcv",
        "createdAt": "2022-02-22T18:01:50.000Z",
        "updatedAt": "2022-03-02T09:04:24.000Z"
      }
    },
    {
      "id": 5,
      "user_id": 1,
      "article_id": 2,
      "createdAt": "2022-03-02T08:55:38.000Z",
      "updatedAt": "2022-03-02T08:55:38.000Z",
      "userInfo": {
        "avator": "/uploads/upload_69e540ce9e6369c272dbe5a20d993a69.jpg",
        "user_name": "admin"
      },
      "articleInfo": {
        "id": 2,
        "user_id": 1,
        "title": "做料引",
        "summary": "性始水代教术现斯比交前矿。",
        "content": "向外路派装济历二二向由部体却具由思更。须石线增市由克义石离很会把以派问好者。八因济片影过图力节水合别。气任标则况所你十使则其受西间。京表从极音会将消战商件民验所。",
        "partition_id": 1,
        "likes": 1,
        "collections": 0,
        "visits": 0,
        "cover_url": "",
        "createdAt": "2022-02-22T18:01:50.000Z",
        "updatedAt": "2022-02-25T08:14:48.000Z"
      }
    }
  ]
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称             | 类型     | 必选 | 约束 | 说明 |
| ---------------- | -------- | ---- | ---- | ---- |
| » code           | integer  | true | none | none |
| » message        | string   | true | none | none |
| » result         | [object] | true | none | none |
| »» id            | integer  | true | none | none |
| »» user_id       | integer  | true | none | none |
| »» article_id    | integer  | true | none | none |
| »» createdAt     | string   | true | none | none |
| »» updatedAt     | string   | true | none | none |
| »» userInfo      | object   | true | none | none |
| »»» avator       | string   | true | none | none |
| »»» user_name    | string   | true | none | none |
| »» articleInfo   | object   | true | none | none |
| »»» id           | integer  | true | none | none |
| »»» user_id      | integer  | true | none | none |
| »»» title        | string   | true | none | none |
| »»» summary      | string   | true | none | none |
| »»» content      | string   | true | none | none |
| »»» partition_id | integer  | true | none | none |
| »»» likes        | integer  | true | none | none |
| »»» collections  | integer  | true | none | none |
| »»» visits       | integer  | true | none | none |
| »»» cover_url    | string   | true | none | none |
| »»» createdAt    | string   | true | none | none |
| »»» updatedAt    | string   | true | none | none |

## GET 获取文章收藏数

GET /collections/count

### 请求参数

| 名称       | 位置  | 类型   | 必选 | 说明   |
| ---------- | ----- | ------ | ---- | ------ |
| article_id | query | string | true | 文章ID |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "获取收藏数成功！",
  "result": {
    "article_id": "2",
    "cnt": 1
  }
}
```

> 文章不存在

```json
{
  "code": 11004,
  "message": "该文章不存在！"
}
```

### 返回结果

| 状态码 | 状态码含义                                                     | 说明       | 数据模型 |
| ------ | -------------------------------------------------------------- | ---------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)        | 成功       | Inline   |
| 404    | [Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4) | 文章不存在 | Inline   |

### 返回数据结构

状态码 **200**

| 名称          | 类型    | 必选 | 约束 | 说明 |
| ------------- | ------- | ---- | ---- | ---- |
| » code        | integer | true | none | none |
| » message     | string  | true | none | none |
| » result      | object  | true | none | none |
| »» article_id | string  | true | none | none |
| »» cnt        | integer | true | none | none |

状态码 **404**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

## DELETE 取消收藏

DELETE /collections/cancel

前台用户取消自己的点赞，会验证该行为是不是用户自己的请求！ 影响对应文章的收藏数

### 请求参数

| 名称       | 位置  | 类型   | 必选 | 说明   |
| ---------- | ----- | ------ | ---- | ------ |
| article_id | query | string | true | 文章ID |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "取消收藏成功！"
}
```

### 返回结果

| 状态码 | 状态码含义                                                     | 说明       | 数据模型 |
| ------ | -------------------------------------------------------------- | ---------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)        | 成功       | Inline   |
| 404    | [Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4) | 记录不存在 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

状态码 **404**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

## POST 新增收藏

POST /collections/add

会避免重复 增加对应文章的收藏数

> Body 请求参数

```json
{
  "article_id": 2
}
```

### 请求参数

| 名称         | 位置 | 类型    | 必选  | 说明 |
| ------------ | ---- | ------- | ----- | ---- |
| body         | body | object  | false | none |
| » article_id | body | integer | true  | none |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "收藏成功！",
  "result": {
    "collection_id": 4,
    "user_id": 1,
    "article_id": 3
  }
}
```

### 返回结果

| 状态码 | 状态码含义                                                    | 说明     | 数据模型 |
| ------ | ------------------------------------------------------------- | -------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)       | 成功     | Inline   |
| 409    | [Conflict](https://tools.ietf.org/html/rfc7231#section-6.5.8) | Conflict | Inline   |

### 返回数据结构

状态码 **200**

| 名称             | 类型    | 必选 | 约束 | 说明 |
| ---------------- | ------- | ---- | ---- | ---- |
| » code           | integer | true | none | none |
| » message        | string  | true | none | none |
| » result         | object  | true | none | none |
| »» collection_id | integer | true | none | none |
| »» user_id       | integer | true | none | none |
| »» article_id    | integer | true | none | none |

状态码 **409**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

# 收藏接口/管理员接口

## DELETE 后台-根据收藏id删除收藏记录

DELETE /collections/deleteByID

管理员直接删除某条收藏记录 影响对应文章的收藏数

### 请求参数

| 名称          | 位置  | 类型   | 必选  | 说明   |
| ------------- | ----- | ------ | ----- | ------ |
| collection_id | query | string | false | 收藏id |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "删除收藏记录成功！"
}
```

### 返回结果

| 状态码 | 状态码含义                                                     | 说明       | 数据模型 |
| ------ | -------------------------------------------------------------- | ---------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)        | 成功       | Inline   |
| 404    | [Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4) | 记录不存在 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

状态码 **404**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

# 

# 点赞接口

## DELETE 取消点赞

DELETE /likes/delete

前台用户取消自己的点赞，会验证该行为是不是用户自己的请求！

### 请求参数

| 名称      | 位置  | 类型   | 必选  | 说明                                                                     |
| --------- | ----- | ------ | ----- | ------------------------------------------------------------------------ |
| type      | query | string | false | 点赞类型 文章article / 评论comment/评论回复comment_reply  不填默认为文章 |
| target_id | query | string | true  | 文章/评论id                                                              |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "取消点赞记录成功！"
}
```

> 记录不存在

```json
{
  "code": 14005,
  "message": "该点赞记录不存在！"
}
```

### 返回结果

| 状态码 | 状态码含义                                                     | 说明       | 数据模型 |
| ------ | -------------------------------------------------------------- | ---------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)        | 成功       | Inline   |
| 404    | [Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4) | 记录不存在 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

状态码 **404**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

## GET 获取点赞记录（文章/评论）

GET /likes/count

### 请求参数

| 名称      | 位置  | 类型   | 必选  | 说明                                                                      |
| --------- | ----- | ------ | ----- | ------------------------------------------------------------------------- |
| type      | query | string | false | 点赞类型 文章article / 评论comment / 评论回复comment_reply 不填默认为文章 |
| target_id | query | string | true  | 文章/评论id                                                               |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "获取点赞记录数成功！",
  "result": {
    "type": "comment",
    "target_id": "1",
    "cnt": 1
  }
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称         | 类型    | 必选 | 约束 | 说明 |
| ------------ | ------- | ---- | ---- | ---- |
| » code       | integer | true | none | none |
| » message    | string  | true | none | none |
| » result     | object  | true | none | none |
| »» type      | string  | true | none | none |
| »» target_id | string  | true | none | none |
| »» cnt       | integer | true | none | none |

## POST 新增点赞

POST /likes/add

会避免重复

> Body 请求参数

```json
{
  "target_id": 8,
  "type": "comment"
}
```

### 请求参数

| 名称           | 位置 | 类型        | 必选  | 说明               |
| -------------- | ---- | ----------- | ----- | ------------------ |
| body           | body | object      | false | none               |
| » type         | body | any         | false | 不传默认为文章     |
| »» *anonymous* | body | string¦null | false | 点赞对象为文章     |
| »» *anonymous* | body | string      | false | 点赞对象为评论     |
| »» *anonymous* | body | string      | false | 点赞对象为评论回复 |
| » target_id    | body | any         | true  | none               |
| »» *anonymous* | body | integer     | false | 点赞类型为文章     |
| »» *anonymous* | body | integer     | false | 点赞类型为评论     |
| »» *anonymous* | body | integer     | false | 点赞类型为评论回复 |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "点赞成功！",
  "result": {
    "like_id": 3,
    "user_id": 1,
    "type": "comment",
    "target_id": 5
  }
}
```

> Conflict

```json
{
  "code": 14003,
  "message": "点赞重复，该用户已点赞过！"
}
```

### 返回结果

| 状态码 | 状态码含义                                                    | 说明     | 数据模型 |
| ------ | ------------------------------------------------------------- | -------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)       | 成功     | Inline   |
| 409    | [Conflict](https://tools.ietf.org/html/rfc7231#section-6.5.8) | Conflict | Inline   |

### 返回数据结构

状态码 **200**

| 名称         | 类型    | 必选 | 约束 | 说明 |
| ------------ | ------- | ---- | ---- | ---- |
| » code       | integer | true | none | none |
| » message    | string  | true | none | none |
| » result     | object  | true | none | none |
| »» like_id   | integer | true | none | none |
| »» user_id   | integer | true | none | none |
| »» type      | string  | true | none | none |
| »» target_id | integer | true | none | none |

状态码 **409**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

# 点赞接口/管理员接口

## DELETE 后台-根据点赞id删除点赞记录

DELETE /likes/deleteByID

删除某条点赞记录 影响对应文章的点赞数

### 请求参数

| 名称    | 位置  | 类型   | 必选  | 说明       |
| ------- | ----- | ------ | ----- | ---------- |
| like_id | query | string | false | 点赞记录id |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "取消点赞记录成功！"
}
```

> 记录不存在

```json
{
  "code": 14005,
  "message": "该点赞记录不存在！"
}
```

### 返回结果

| 状态码 | 状态码含义                                                     | 说明       | 数据模型 |
| ------ | -------------------------------------------------------------- | ---------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)        | 成功       | Inline   |
| 404    | [Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4) | 记录不存在 | Inline   |

### 返回数据结构

状态码 **404**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

# 模糊搜索接口

## GET 搜索联想词请求（外部接口）

GET /sugrec

### 请求参数

| 名称 | 位置  | 类型   | 必选  | 说明 |
| ---- | ----- | ------ | ----- | ---- |
| prod | query | string | false | none |
| wd   | query | string | false | none |

> 返回示例

> 成功

```json
{
  "q": "乌克兰",
  "p": false,
  "g": [
    {
      "type": "sug",
      "sa": "s_1",
      "q": "乌克兰释放参过军的囚犯参战"
    },
    {
      "type": "sug",
      "sa": "s_2",
      "q": "乌克兰最新局势"
    },
    {
      "type": "sug",
      "sa": "s_3",
      "q": "乌克兰局势最新进展"
    },
    {
      "type": "sug",
      "sa": "s_4",
      "q": "乌克兰谈判"
    },
    {
      "type": "sug",
      "sa": "s_5",
      "q": "乌克兰局势"
    },
    {
      "type": "sug",
      "sa": "s_6",
      "q": "乌克兰首都基辅巷战已打响"
    },
    {
      "type": "sug",
      "sa": "s_7",
      "q": "乌克兰与俄罗斯冲突原因是什么"
    },
    {
      "type": "sug",
      "sa": "s_8",
      "q": "乌克兰面积和人口"
    },
    {
      "type": "sug",
      "sa": "s_9",
      "q": "乌克兰地图"
    },
    {
      "type": "sug",
      "sa": "s_10",
      "q": "乌克兰总统"
    }
  ],
  "slid": "277405144775871",
  "queryid": "0x15fc4c6b1cfcbf"
}
```

```json
{
  "q": "欸嘿?",
  "p": true,
  "g": [
    {
      "type": "sug",
      "sa": "s_1",
      "q": "诶嘿得囊打哟"
    },
    {
      "type": "sug",
      "sa": "s_2",
      "q": "诶嘿是什么意思啊"
    },
    {
      "type": "sug",
      "sa": "s_3",
      "q": "诶嘿原神"
    },
    {
      "type": "sug",
      "sa": "s_4",
      "q": "诶嘿是什么意思啊用日语怎么说"
    },
    {
      "type": "sug",
      "sa": "s_5",
      "q": "诶嘿是什么意思啦!喂!"
    }
  ],
  "slid": "131920807021609",
  "queryid": "0x9877fb34d74c29"
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型     | 必选 | 约束 | 说明 |
| --------- | -------- | ---- | ---- | ---- |
| » q       | string   | true | none | none |
| » p       | boolean  | true | none | none |
| » g       | [object] | true | none | none |
| »» type   | string   | true | none | none |
| »» sa     | string   | true | none | none |
| »» q      | string   | true | none | none |
| » slid    | string   | true | none | none |
| » queryid | string   | true | none | none |

## GET 用户名模糊搜索

GET /search/byname

### 请求参数

| 名称      | 位置  | 类型   | 必选 | 说明 |
| --------- | ----- | ------ | ---- | ---- |
| like_name | query | string | true | none |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "查询成功",
  "result": {
    "res": [
      {
        "id": 2,
        "user_name": "cos",
        "password": "$2a$10$M5j9KET1OjcD4NkV6W3PqegMQ.CUpk5wwDRngPVGnNPuJ3NEGribW",
        "is_admin": 0,
        "img": "https://www.pickpik.com/bled-slovenia-lake-mountains-mountain-the-fog-97",
        "is_active": 0,
        "name": "",
        "city": "",
        "sex": "保密",
        "createdAt": "2022-02-22T14:30:39.000Z",
        "updatedAt": "2022-02-22T14:30:39.000Z"
      },
      {
        "id": 5,
        "user_name": "Charles",
        "password": "$2a$10$Th99cMCEdvpqoJ71U3NvCeqr.YmnjfsfnCfknVpfQQMhe5OgaUjTG",
        "is_admin": 0,
        "img": "https://www.pickpik.com/bled-slovenia-lake-mountains-mountain-the-fog-97",
        "is_active": 0,
        "name": "",
        "city": "",
        "sex": "保密",
        "createdAt": "2022-02-22T14:30:39.000Z",
        "updatedAt": "2022-02-22T14:30:39.000Z"
      },
      {
        "id": 8,
        "user_name": "Shirley",
        "password": "$2a$10$htv1PPMcCyD7r1K/2gx.Q.ZGBLP174PII3kaiJ7WG9MUESkQEpmTm",
        "is_admin": 0,
        "img": "https://www.pickpik.com/bled-slovenia-lake-mountains-mountain-the-fog-97",
        "is_active": 0,
        "name": "",
        "city": "",
        "sex": "保密",
        "createdAt": "2022-02-22T14:30:40.000Z",
        "updatedAt": "2022-02-22T14:30:40.000Z"
      }
    ]
  }
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称          | 类型     | 必选 | 约束 | 说明 |
| ------------- | -------- | ---- | ---- | ---- |
| » code        | integer  | true | none | none |
| » message     | string   | true | none | none |
| » result      | object   | true | none | none |
| »» res        | [object] | true | none | none |
| »»» id        | integer  | true | none | none |
| »»» user_name | string   | true | none | none |
| »»» password  | string   | true | none | none |
| »»» is_admin  | integer  | true | none | none |
| »»» img       | string   | true | none | none |
| »»» is_active | integer  | true | none | none |
| »»» name      | string   | true | none | none |
| »»» city      | string   | true | none | none |
| »»» sex       | string   | true | none | none |
| »»» createdAt | string   | true | none | none |
| »»» updatedAt | string   | true | none | none |

## GET 文章模糊搜索（可分页）

GET /search/byword

- 可根据关键字进行文章标题/内容/摘要匹配，返回所有包括该关键字的文章
- 可分页获取搜索结果，支持自定义分页大小、每页数量

### 请求参数

| 名称    | 位置  | 类型   | 必选  | 说明                                                              |
| ------- | ----- | ------ | ----- | ----------------------------------------------------------------- |
| wd      | query | string | true  | 查询关键字 (word)  不填或为空格则默认搜索关键词为一个空格         |
| current | query | string | false | 当前页数 默认第1页                                                |
| size    | query | string | false | 每页数目 默认为10篇文章                                           |
| status  | query | string | false | 文章状态 不传默认只能查到已发布文章 0已发布  1为被屏蔽、2为回收站 |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "查询成功",
  "result": {
    "res": {
      "page_nums": 2,
      "count": 6,
      "rows": [
        {
          "id": 7,
          "user_id": 1,
          "title": "【第二届青训营-寒假前端场】- 「Node.js 与前端开发实战」",
          "summary": "这节课从Node.js介绍起，实现了其编写Http Server的一个实战（并用Promise优化回调，还对SSR有了一定的了解），并在延伸话题里老师也给出了一些建议与拓展阅读，好欸~",
          "content": "早期的jQuery等库都是直接在页面中引入，后来模块化逐渐成熟，Node.js赋予了开发者在浏览器外运行代码的能力，前端逐渐模块化。一个常见场景：读取文件时。当Node.js执行I/O操作时，会在响应返回后恢复操作，而不是阻塞线程并占用额外内存等待。（内存占用更少）",
          "partition_id": 1,
          "likes": 19,
          "collections": 0,
          "visits": 0,
          "status": 0,
          "cover_url": "",
          "createdAt": "2022-02-24T06:50:23.000Z",
          "updatedAt": "2022-02-26T08:37:46.000Z",
          "deletedAt": null
        },
        // ...略
        {
          "id": 37,
          "user_id": 7,
          "title": "【第二届青训营-寒假前端场】- 「Node.js 与前端开发实战」",
          "summary": "这节课从Node.js介绍起，实现了其编写Http Server的一个实战（并用Promise优化回调，还对SSR有了一定的了解），并在延伸话题里老师也给出了一些建议与拓展阅读，好欸~",
          "content": "早期的jQuery等库都是直接在页面中引入，后来模块化逐渐成熟，Node.js赋予了开发者在浏览器外运行代码的能力，前端逐渐模块化。一个常见场景：读取文件时。当Node.js执行I/O操作时，会在响应返回后恢复操作，而不是阻塞线程并占用额外内存等待。（内存占用更少）",
          "partition_id": 1,
          "likes": 0,
          "collections": 0,
          "visits": 0,
          "status": 0,
          "cover_url": "",
          "createdAt": "2022-02-24T06:50:25.000Z",
          "updatedAt": "2022-02-24T06:50:25.000Z",
          "deletedAt": null
        }
      ]
    }
  }
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称              | 类型                                | 必选  | 约束 | 说明         |
| ----------------- | ----------------------------------- | ----- | ---- | ------------ |
| » code            | integer                             | true  | none | none         |
| » message         | string                              | true  | none | none         |
| » result          | object                              | true  | none | none         |
| »» res            | object                              | true  | none | none         |
| »»» page_nums     | integer                             | true  | none | none         |
| »»» count         | integer                             | true  | none | none         |
| »»» rows          | [[sc_articles](#schemasc_articles)] | true  | none | none         |
| »»»» id           | integer                             | true  | none | none         |
| »»»» user_id      | integer                             | true  | none | none         |
| »»»» title        | string                              | true  | none | none         |
| »»»» summary      | string¦null                         | false | none | none         |
| »»»» content      | string                              | true  | none | 可以为富文本 |
| »»»» partition_id | integer                             | true  | none | none         |
| »»»» cover_url    | string¦null                         | false | none | none         |
| »»»» likes        | integer                             | true  | none | none         |
| »»»» collections  | integer                             | true  | none | none         |
| »»»» visits       | integer                             | true  | none | none         |
| »»»» createdAt    | string                              | true  | none | none         |
| »»»» updatedAt    | string                              | true  | none | none         |
| »»»» deletedAt    | any                                 | true  | none | none         |

*anyOf*

| 名称              | 类型   | 必选  | 约束 | 说明 |
| ----------------- | ------ | ----- | ---- | ---- |
| »»»»» *anonymous* | string | false | none | none |

*or*

| 名称              | 类型 | 必选  | 约束 | 说明 |
| ----------------- | ---- | ----- | ---- | ---- |
| »»»»» *anonymous* | null | false | none | none |

*continued*

| 名称        | 类型    | 必选 | 约束 | 说明                           |
| ----------- | ------- | ---- | ---- | ------------------------------ |
| »»»» status | integer | true | none | 默认为0已发布，1被屏蔽 2已删除 |

## 前端建立websocket连接示例
```js
let token = "用户token"
let uid = 1 // 用户id
 var websocket = new WebSocket("ws://127.0.0.1:8001/" + uid, [token]);

    // 监听连接开启
    websocket.onopen = function(){
        console.log("连接成功");
    }
    // 监听连接关闭
    websocket.onclose = function(){
        console.log("退出连接");
    }
    // 监听后端发来的消息
    websocket.onmessage = function (event){
        console.log("收到消息"+event.data);
    }
    // 监听错误
    websocket.onerror = function(){
        console.log("连接出错");
    }


    // 前端发送消息
    websocket.send(JSON.stringify({
      fromUId: 1,  //  发起通信的用户
      toUId: 2,    // 被通信的用户
      type: 'private', // 通信的类型， private（私发）、群发（group）、错误（error）
      data: { // 传输的数据
        reply: 'hello nice to meet you!'
      }
    }))

```