<!--
 * @Author: 41
 * @Date: 2022-02-15 17:53:43
 * @LastEditors: lihao
 * @LastEditTime: 2022-02-21 18:50:43
 * @Description: 
-->
# 数据库
### 用户表
|字段名|字段类型| 说明|
|--|--|--|
|id|int|主键,自增|
|user_name|varchar(255)|用户名,unique|
|password|char(64)|密码|
|is_admin|tinyint(1)|0:不是管理员 1:是管理员|

### 文章表 sc_Articles

| 字段名       | 字段类型     | 允许为空 | 说明                   |
| ------------ | ------------ | -------- | ---------------------- |
| id           | int          | N        | 文章id                 |
| user_id      | int          | N        | 发贴用户id 外键        |
| title        | varchar(255) | N        | 文章标题               |
| summary      | varchar(255) | Y        | 文章摘要：纯文本       |
| content      | text         | N        | 文章详情：可以为富文本 |
| partition_id | int          | N        | 分区号 外键            |
| likes        | int          | N        | 点赞数 初始为0         |
| collections  | int          | N        | 收藏数 初始为0         |
| visits       | int          | N        | 浏览数 初始为0         |
| status      | Boolean   | N    | false已发布 true被屏蔽 默认为false     |
| cover_url   | varchar(255)  | Y     | 文章封面url，初始为空    |

### 分区表

| 字段名         | 字段类型     | 说明             |
| -------------- | ------------ | ---------------- |
| id             | int          | 主键,自增        |
| partition_name | varchar(255) | 分区的名称       |
| partition_desc | varchar(255) | 分区的描述       |
| cre_user_id    | int          | 创建分区的用户id |

### 评论表
| 字段名         | 字段类型     | 说明             |
| -------------- | ------------ | ---------------- |
| id             | int          | 主键,自增        |
| comment_content | varchar(255) | 评论的内容       |
| user_id | int | 写评论的用户id       |
| article_id    | int          | 被评论的文章id |

# 接口设计

## 用户模块
### 注册接口
```bash
POST/users/register
```
- 请求参数
```
user_name,password
```
- 响应

**成功**
```JSON
{
  "code":0,
  "message":"用户注册成功",
  "result":{
    "id":2,
    "user_name":"user"
  }
}
```
**失败**
```JSON
{
  "code":"10001",
  "message":"用户名或密码不能为空",
  "result":""
}
{
  "code":"10002",
  "message":"用户已经存在",
  "result":""
}
{
  "code":"10003",
  "message":"用户注册失败",
  "result":""
}
```
***
### 登录接口
```bash
POST/users/login
```
- 请求参数
```
user_name,password
```
- 响应

**成功**
```JSON
{
    "code": 0,
    "message": "用户登录成功",
    "result": {
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NCwidXNlcl9uYW1lIjoi5bCP5piOMiIsImlzX2FkbWluIjpmYWxzZSwiaWF0IjoxNjQ1MDc5NjA4LCJleHAiOjE2NDUxNjYwMDh9.-F905vX9_n3s7fZGkJVXuZ9Y1LRwLvvAAEG1j4gXB8E"
    }
}
```

**失败**
```JSON
{
  "code": "10004",
  "message": "用户不存在",
  "result": ""
}
{
  "code": "10005",
  "message": "用户登录失败",
  "result": ""
}
{
  "code": "10006",
  "message": "密码不匹配",
  "result": ""
}
```
***
### 修改密码接口
- 请求参数
```
password
```
- 响应

**成功**
```JSON
{
  "code":0,
  "message":"修改密码成功",
  "result":""
}
```

**失败**

```JSON
{
  "code": "10101",
  "message": "token已过期",
  "result": ""
}
{
  "code": "10102",
  "message": "token无效",
  "result": ""
}
{
  "code": "10007",
  "message": "修改密码失败",
  "result": ""
}
```

---

# 发帖管理接口

## DELETE 屏蔽文章

DELETE /articles/shield

仅管理员可用！

### 请求参数

| 名称       | 位置  | 类型   | 必选  | 说明         |
| ---------- | ----- | ------ | ----- | ------------ |
| article_id | query | string | false | 待屏蔽文章id |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "屏蔽该文章成功！"
}
```

> 禁止访问

```json
{
  "code": "10103",
  "message": "未授权,当前请求需要管理员权限",
  "result": ""
}
```

> 记录不存在

```json
{
  "code": "11004",
  "message": "该文章不存在！"
}
```

### 返回结果

| 状态码 | 状态码含义                                                   | 说明       | 数据模型 |
| ------ | ------------------------------------------------------------ | ---------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)      | 成功       | Inline   |
| 403    | [Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3) | 禁止访问   | Inline   |
| 404    | [Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4) | 记录不存在 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

状态码 **403**

| 名称      | 类型   | 必选 | 约束 | 说明 |
| --------- | ------ | ---- | ---- | ---- |
| » code    | string | true | none | none |
| » message | string | true | none | none |
| » result  | string | true | none | none |

状态码 **404**

| 名称      | 类型   | 必选 | 约束 | 说明 |
| --------- | ------ | ---- | ---- | ---- |
| » code    | string | true | none | none |
| » message | string | true | none | none |

## PATCH 更新文章

PATCH /articles/update

> Body 请求参数

```json
{
  "article_id": 3,
  "content": "业派较定般感心意少快由话。水合理它价数及四精持白把切。性场很单导化然规证力空数即该历。资照龙无认状战件属经百力格设。取下团经现步带照速别己切。",
  "summary": "8ai4",
  "partition_id": 2,
  "cover_url": "http://dnjej.cq/upyfnrkcv",
  "title": "Snvw Njdn Qousdg Mpbz"
}
```

### 请求参数

| 名称           | 位置 | 类型        | 必选  | 说明                       |
| -------------- | ---- | ----------- | ----- | -------------------------- |
| body           | body | object      | false | none                       |
| » content      | body | string      | false | 更新后的内容，可以是富文本 |
| » summary      | body | string¦null | false | 更新后的文章摘要           |
| » title        | body | string      | false | 更新后的文章标题           |
| » article_id   | body | integer     | true  | 待更新文章ID               |
| » partition_id | body | integer     | false | 新分区ID                   |
| » cover_url    | body | string      | false | 新头图地址                 |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "更新文章成功！"
}
```

> 请求有误

```json
{
  "code": "11000",
  "message": "文章id不可以为空"
}
```

> 记录不存在

```json
{
  "code": "11004",
  "message": "该文章不存在！"
}
```

### 返回结果

| 状态码 | 状态码含义                                                   | 说明       | 数据模型 |
| ------ | ------------------------------------------------------------ | ---------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)      | 成功       | Inline   |
| 400    | [Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1) | 请求有误   | Inline   |
| 404    | [Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4) | 记录不存在 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选 | 约束 | 说明     |
| --------- | ------- | ---- | ---- | -------- |
| » code    | integer | true | none | none     |
| » message | string  | true | none | 提示文本 |

状态码 **400**

| 名称      | 类型   | 必选 | 约束 | 说明 |
| --------- | ------ | ---- | ---- | ---- |
| » code    | string | true | none | none |
| » message | string | true | none | none |

状态码 **404**

| 名称      | 类型   | 必选 | 约束 | 说明     |
| --------- | ------ | ---- | ---- | -------- |
| » code    | string | true | none | 错误码   |
| » message | string | true | none | 提示信息 |

## GET 根据文章id获取文章

GET /articles/getbyid

注意！！！被屏蔽的也会被获取到

> Body 请求参数

```json
{}
```

### 请求参数

| 名称       | 位置  | 类型   | 必选  | 说明                 |
| ---------- | ----- | ------ | ----- | -------------------- |
| article_id | query | string | true  | 根据此id获取文章信息 |
| body       | body  | object | false | none                 |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "获取文章成功！",
  "result": {
    "id": 3,
    "user_id": 1,
    "title": "【第二届青训营-寒假前端场】- 「Node.js 与前端开发实战」",
    "summary": "这节课从Node.js介绍起，实现了其编写Http Server的一个实战（并用Promise优化回调，还对SSR有了一定的了解），并在延伸话题里老师也给出了一些建议与拓展阅读，好欸~",
    "content": "早期的jQuery等库都是直接在页面中引入，后来模块化逐渐成熟，Node.js赋予了开发者在浏览器外运行代码的能力，前端逐渐模块化。一个常见场景：读取文件时。当Node.js执行I/O操作时，会在响应返回后恢复操作，而不是阻塞线程并占用额外内存等待。（内存占用更少）",
    "partition_id": 1,
    "likes": 0,
    "collections": 0,
    "visits": 0,
    "status": true,
    "cover_url": "",
    "createdAt": "2022-02-22T18:01:50.000Z",
    "updatedAt": "2022-02-22T18:10:24.000Z",
    "deletedAt": null
  }
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称            | 类型    | 必选 | 约束 | 说明 |
| --------------- | ------- | ---- | ---- | ---- |
| » code          | integer | true | none | none |
| » message       | string  | true | none | none |
| » result        | object  | true | none | none |
| »» id           | integer | true | none | none |
| »» user_id      | integer | true | none | none |
| »» title        | string  | true | none | none |
| »» summary      | string  | true | none | none |
| »» content      | string  | true | none | none |
| »» partition_id | integer | true | none | none |
| »» likes        | integer | true | none | none |
| »» collections  | integer | true | none | none |
| »» visits       | integer | true | none | none |
| »» status       | boolean | true | none | none |
| »» cover_url    | string  | true | none | none |
| »» createdAt    | string  | true | none | none |
| »» updatedAt    | string  | true | none | none |
| »» deletedAt    | null    | true | none | none |

## GET 获取所有文章

GET /articles/getlist

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "获取文章列表成功！",
  "result": [
    {
      "id": 1,
      "user_id": 1,
      "user_name": "admin",
      "is_admin": 1,
      "title": "体转共切报程",
      "summary": "图写适属增毛理研七收准石平度公须。",
      "content": "何到眼写属了或深边么众价总科光。资更江共重团声被按支心总其关放细务。复许世管样最象应青称维用系作活些。消同点回常拉法传县安提不。",
      "partition_id": 1,
      "comments": 0,
      "likes": 0,
      "collections": 0,
      "visits": 0,
      "createdAt": "2022-02-20T12:51:57.000Z",
      "updatedAt": "2022-02-20T12:51:57.000Z",
      "deletedAt": null
    },
    {
      "id": 2,
      "user_id": 1,
      "user_name": "admin",
      "is_admin": 1,
      "title": "济少把保变立",
      "summary": "定叫器式业更化叫那引生记育行。",
      "content": "需确公空义十业委听打再明算。毛解知机积两世即从传先题流。都也无提采书济该劳它六较。史会情离己般只即比一断七把志结严导回。",
      "partition_id": 1,
      "comments": 0,
      "likes": 0,
      "collections": 0,
      "visits": 0,
      "createdAt": "2022-02-20T12:51:57.000Z",
      "updatedAt": "2022-02-20T12:51:57.000Z",
      "deletedAt": null
    },
    {
      "id": 3,
      "user_id": 1,
      "user_name": "admin",
      "is_admin": 1,
      "title": "军示全大",
      "summary": "别百养作身发家世无片包务研。",
      "content": "把外解标放机计干去历世分这原。始员给效重界接听称群说知交色名。许中备安名率却数片日习月周。直计连容西教斯类后原教实青专运比。",
      "partition_id": 1,
      "comments": 0,
      "likes": 0,
      "collections": 0,
      "visits": 0,
      "createdAt": "2022-02-20T12:51:58.000Z",
      "updatedAt": "2022-02-20T12:51:58.000Z",
      "deletedAt": null
    },
    {
      "id": 4,
      "user_id": 1,
      "user_name": "admin",
      "is_admin": 1,
      "title": "厂热它济器识",
      "summary": "细心统导道满作边千江们期产接什。",
      "content": "子四科么决空点周常价几计论验风广。发要军加清王接众会把适查商查得解。认知因下即可空产深斯接期由见教六内。领类地采放放格织务研根家林部。质反铁被片理六商了存般构可她是过米。",
      "partition_id": 1,
      "comments": 0,
      "likes": 0,
      "collections": 0,
      "visits": 0,
      "createdAt": "2022-02-20T12:51:58.000Z",
      "updatedAt": "2022-02-20T12:51:58.000Z",
      "deletedAt": null
    },
    {
      "id": 5,
      "user_id": 1,
      "user_name": "admin",
      "is_admin": 1,
      "title": "【第二届青训营-寒假前端场】- 「Node.js 与前端开发实战」",
      "summary": "这节课从Node.js介绍起，实现了其编写Http Server的一个实战（并用Promise优化回调，还对SSR有了一定的了解），并在延伸话题里老师也给出了一些建议与拓展阅读，好欸~",
      "content": "早期的jQuery等库都是直接在页面中引入，后来模块化逐渐成熟，Node.js赋予了开发者在浏览器外运行代码的能力，前端逐渐模块化。一个常见场景：读取文件时。当Node.js执行I/O操作时，会在响应返回后恢复操作，而不是阻塞线程并占用额外内存等待。（内存占用更少）",
      "partition_id": 1,
      "comments": 0,
      "likes": 0,
      "collections": 0,
      "visits": 0,
      "createdAt": "2022-02-20T12:51:58.000Z",
      "updatedAt": "2022-02-20T12:51:58.000Z",
      "deletedAt": null
    },
    {
      "id": 6,
      "user_id": 1,
      "user_name": "admin",
      "is_admin": 1,
      "title": "Wgnpee Fovg Ysbyh Ymmfhwp Ghip Hzvmvu Vlvq",
      "summary": null,
      "content": "压两来于音最战收济别置本难西。全表团由每平况后片近他等矿是名进收参。为军大拉系京下育织事矿广见。加龙话起响水般组消性年二何油界。建除响道进称接度那头传对开提照。",
      "partition_id": 1,
      "comments": 0,
      "likes": 0,
      "collections": 0,
      "visits": 0,
      "createdAt": "2022-02-20T12:51:58.000Z",
      "updatedAt": "2022-02-20T12:51:58.000Z",
      "deletedAt": null
    },
    {
      "id": 7,
      "user_id": 2,
      "user_name": "cos",
      "is_admin": 0,
      "title": "式立众阶况",
      "summary": "边切治往利江而近作业行阶行。",
      "content": "去全确法离层权子事系越区县业。界争活论身建识带过从层以界满究斗下。型往外关准管较农般此养与。多已角族百九导任养心存克况律火候。",
      "partition_id": 1,
      "comments": 0,
      "likes": 0,
      "collections": 0,
      "visits": 0,
      "createdAt": "2022-02-20T12:51:58.000Z",
      "updatedAt": "2022-02-20T12:51:58.000Z",
      "deletedAt": null
    },
    {
      "id": 8,
      "user_id": 2,
      "user_name": "cos",
      "is_admin": 0,
      "title": "林白打更共",
      "summary": "线习装识通天飞走处月而利手向文写。",
      "content": "干完资中统天回队造造容生又力则空火。政报作非布极他等局系意生民头务识系。所解名自育研通严般多开光叫真指支。战状世点议平式决际照边史习周。",
      "partition_id": 1,
      "comments": 0,
      "likes": 0,
      "collections": 0,
      "visits": 0,
      "createdAt": "2022-02-20T12:51:58.000Z",
      "updatedAt": "2022-02-20T12:51:58.000Z",
      "deletedAt": null
    },
    {
      "id": 9,
      "user_id": 2,
      "user_name": "cos",
      "is_admin": 0,
      "title": "按后出家通",
      "summary": "广调议最京到议水变连严位万确片。",
      "content": "建越价引力记满信事求有规水造方白那真。之都按候长们历受专八备就非。或解列样农记明步中情军备相强安。管点思况除国省再展元动指取情于拉战。构长件认门形或明生力领者。",
      "partition_id": 1,
      "comments": 0,
      "likes": 0,
      "collections": 0,
      "visits": 0,
      "createdAt": "2022-02-20T12:51:58.000Z",
      "updatedAt": "2022-02-20T12:51:58.000Z",
      "deletedAt": null
    },
    {
      "id": 10,
      "user_id": 2,
      "user_name": "cos",
      "is_admin": 0,
      "title": "己精再大己",
      "summary": "红便约号常往标广论切达组多素总省要。",
      "content": "单空团小在然件性代见其则值场般后。则积取状员已老选深打主四京关石易许。备斗地等发被路空安二发金。",
      "partition_id": 1,
      "comments": 0,
      "likes": 0,
      "collections": 0,
      "visits": 0,
      "createdAt": "2022-02-20T12:51:58.000Z",
      "updatedAt": "2022-02-20T12:51:58.000Z",
      "deletedAt": null
    }
  ]
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称            | 类型        | 必选 | 约束 | 说明                 |
| --------------- | ----------- | ---- | ---- | -------------------- |
| » code          | integer     | true | none | none                 |
| » message       | string      | true | none | none                 |
| » result        | [object]    | true | none | none                 |
| »» id           | integer     | true | none | none                 |
| »» user_id      | integer     | true | none | none                 |
| »» user_name    | string      | true | none | none                 |
| »» is_admin     | integer     | true | none | none                 |
| »» title        | string      | true | none | none                 |
| »» summary      | string¦null | true | none | none                 |
| »» content      | string      | true | none | none                 |
| »» partition_id | integer     | true | none | none                 |
| »» comments     | integer     | true | none | none                 |
| »» likes        | integer     | true | none | none                 |
| »» collections  | integer     | true | none | none                 |
| »» visits       | integer     | true | none | none                 |
| »» createdAt    | string      | true | none | none                 |
| »» updatedAt    | string      | true | none | none                 |
| »» deletedAt    | null        | true | none | 软删除则不会有该字段 |

## DELETE 删除文章

DELETE /articles/delete

根据文章id删除文章，注意，此处是软删除，后续可加入定期清理

### 请求参数

| 名称       | 位置  | 类型   | 必选 | 说明         |
| ---------- | ----- | ------ | ---- | ------------ |
| article_id | query | string | true | 待删除文章ID |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "删除文章成功！"
}
```

> 请求有误

```json
{
  "code": "11000",
  "message": "文章id不可以为空"
}
```

> 记录不存在

```json
{
  "code": "11004",
  "message": "该文章不存在！"
}
```

### 返回结果

| 状态码 | 状态码含义                                                   | 说明       | 数据模型 |
| ------ | ------------------------------------------------------------ | ---------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)      | 成功       | Inline   |
| 400    | [Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1) | 请求有误   | Inline   |
| 404    | [Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4) | 记录不存在 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选 | 约束 | 说明     |
| --------- | ------- | ---- | ---- | -------- |
| » code    | integer | true | none | none     |
| » message | string  | true | none | 提示文本 |

状态码 **400**

| 名称      | 类型   | 必选 | 约束 | 说明 |
| --------- | ------ | ---- | ---- | ---- |
| » code    | string | true | none | none |
| » message | string | true | none | none |

状态码 **404**

| 名称      | 类型   | 必选 | 约束 | 说明     |
| --------- | ------ | ---- | ---- | -------- |
| » code    | string | true | none | 错误码   |
| » message | string | true | none | 提示语句 |

## POST 发表文章

POST /articles/create

支持头图、分区选择，注意图片上传通过articles/upload接口上传（开发中）而分区id发送前需确保该分区已经存在了

> Body 请求参数

```json
{
  "content": "确么运低由育力为光些下群除已计能究。两至石江发步料间极命切物道青。年科圆都立从少王图增整众断百。专军前角他在想目定引长运须原确。那江会龙线干解全展广参志西因原看半江。标场家合中完选马上正情角里制。",
  "title": "现王下共五什设",
  "partition_id": 1,
  "cover_url": "http://ktyfht.lv/dodg",
  "summary": "面派再一达对调我率提色及。"
}
```

### 请求参数

| 名称           | 位置 | 类型        | 必选  | 说明                                    |
| -------------- | ---- | ----------- | ----- | --------------------------------------- |
| body           | body | object      | false | none                                    |
| » content      | body | string      | true  | 可以是富文本                            |
| » summary      | body | string¦null | false | 文章摘要                                |
| » title        | body | string      | true  | 文章标题                                |
| » partition_id | body | integer     | false | 不传则为默认分区，id为1                 |
| » cover_url    | body | string¦null | false | 文章头图的url，通过上传接口可以进行上传 |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "发帖成功！",
  "result": {
    "article_id": 5,
    "user_id": 1,
    "partition_id": 1,
    "title": "【第二届青训营-寒假前端场】- 「Node.js 与前端开发实战」"
  }
}
```

> 请求有误

```json
{
  "code": "11003",
  "message": "文章标题或内容为空"
}
```

### 返回结果

| 状态码 | 状态码含义                                                   | 说明     | 数据模型 |
| ------ | ------------------------------------------------------------ | -------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)      | 成功     | Inline   |
| 400    | [Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1) | 请求有误 | Inline   |

### 返回数据结构

状态码 **200**

| 名称            | 类型    | 必选 | 约束 | 说明                   |
| --------------- | ------- | ---- | ---- | ---------------------- |
| » code          | integer | true | none | none                   |
| » message       | string  | true | none | 提示文本               |
| » result        | object  | true | none | 返回数据               |
| »» article_id   | integer | true | none | 数据库中该文章所对应ID |
| »» user_id      | integer | true | none | 发帖用户名             |
| »» partition_id | integer | true | none | 该文章所处分区ID       |
| »» title        | string  | true | none | 该文章标题             |

状态码 **400**

| 名称      | 类型   | 必选 | 约束 | 说明     |
| --------- | ------ | ---- | ---- | -------- |
| » code    | string | true | none | 错误码   |
| » message | string | true | none | 提示信息 |

## POST 恢复文章

POST /articles/restore

仅管理员可用！

### 请求参数

| 名称       | 位置  | 类型   | 必选 | 说明 |
| ---------- | ----- | ------ | ---- | ---- |
| article_id | query | string | true | none |

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "恢复该文章成功！"
}
```

> 禁止访问

```json
{
  "code": "10103",
  "message": "未授权,当前请求需要管理员权限",
  "result": ""
}
```

> 记录不存在

```json
{
  "code": "11004",
  "message": "该文章不存在！"
}
```

### 返回结果

| 状态码 | 状态码含义                                                   | 说明       | 数据模型 |
| ------ | ------------------------------------------------------------ | ---------- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)      | 成功       | Inline   |
| 403    | [Forbidden](https://tools.ietf.org/html/rfc7231#section-6.5.3) | 禁止访问   | Inline   |
| 404    | [Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4) | 记录不存在 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型    | 必选 | 约束 | 说明 |
| --------- | ------- | ---- | ---- | ---- |
| » code    | integer | true | none | none |
| » message | string  | true | none | none |

状态码 **403**

| 名称      | 类型   | 必选 | 约束 | 说明 |
| --------- | ------ | ---- | ---- | ---- |
| » code    | string | true | none | none |
| » message | string | true | none | none |
| » result  | string | true | none | none |

状态码 **404**

| 名称      | 类型   | 必选 | 约束 | 说明 |
| --------- | ------ | ---- | ---- | ---- |
| » code    | string | true | none | none |
| » message | string | true | none | none |

# 分区接口

## GET 查询所有分区

GET /partition/queryAllPartition

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "查询所有分区成功",
  "result": [
    {
      "id": 1,
      "partition_name": "分区测试",
      "partition_desc": "用于测试分区模块",
      "cre_user_id": 1,
      "createdAt": "2022-02-21T10:26:11.000Z",
      "updatedAt": "2022-02-21T10:26:11.000Z"
    }
  ]
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|

### 返回数据结构

## POST 创建分区接口

POST /partition/insertPartition

> Body 请求参数

```json
{
  "partition_name": "分区测试",
  "partition_desc": "用于测试分区模块"
}
```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|body|body|object|false|none|
|» partition_name|body|string|true|分区名称|
|» partition_desc|body|string|true|分区描述|

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "分区创建成功",
  "result": ""
}
```

```json
{
  "code": "12001",
  "message": "创建分区失败",
  "result": ""
}
```

```json
{
  "code": "12002",
  "message": "分区名称已存在",
  "result": ""
}
```

```json
{
  "code": "12003",
  "message": "分区名称不可以为空",
  "result": ""
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|


状态码 **200**

|名称|类型|必选|约束|说明|
|---|---|---|---|---|
|» code|string|true|none|none|
|» message|string|true|none|none|
|» result|object|true|none|none|

## DELETE 删除分区接口

DELETE /partition/deletePartition

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|id|query|string|false|none|

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "分区删除成功",
  "result": ""
}
```

```json
{
  "code": "12004",
  "message": "分区删除失败",
  "result": ""
}
```

```json
{
  "code": "12005",
  "message": "分区id为空",
  "result": ""
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|


状态码 **200**

|名称|类型|必选|约束|说明|
|---|---|---|---|---|
|» code|string|true|none|none|
|» message|string|true|none|none|
|» result|object|true|none|none|

# 评论接口

## GET 根据文章id获取评论

GET /comment/queryCommentByArticleId

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|id|query|string|false|none|

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "查询评论成功",
  "result": [
    {
      "id": 1,
      "comment_content": "哈哈哈",
      "user_id": 1,
      "article_id": 1,
      "createdAt": "2022-02-21T07:52:58.000Z",
      "updatedAt": "2022-02-21T07:52:58.000Z",
      "deletedAt": null
    },
    {
      "id": 2,
      "comment_content": "哈哈哈",
      "user_id": 1,
      "article_id": 1,
      "createdAt": "2022-02-21T08:35:31.000Z",
      "updatedAt": "2022-02-21T08:35:31.000Z",
      "deletedAt": null
    },
    {
      "id": 3,
      "comment_content": "哈哈哈2",
      "user_id": 1,
      "article_id": 1,
      "createdAt": "2022-02-21T08:36:50.000Z",
      "updatedAt": "2022-02-21T08:36:50.000Z",
      "deletedAt": null
    }
  ]
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|


## DELETE 删除评论

DELETE /comment/deleteComment

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|id|query|string|false|none|

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "删除评论成功",
  "result": ""
}
```

```json
{
  "code": "13003",
  "message": "评论id不可以为空",
  "result": ""
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|


## PATCH 恢复评论

PATCH /comment/restoreComment

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|id|query|string|false|none|

> 返回示例

> 成功

```json
{
  "code": "10103",
  "message": "未授权,当前请求需要管理员权限",
  "result": ""
}
```

```json
{
  "code": "13003",
  "message": "评论id不可以为空",
  "result": ""
}
```

```json
{
  "code": 0,
  "message": "恢复评论成功",
  "result": ""
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|



## POST 新增评论的接口

POST /comment/createComment

> Body 请求参数

```json
{
  "comment_content": "string",
  "article_id": 0
}
```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|body|body|object|false|none|
|» comment_content|body|string|true|none|
|» article_id|body|integer|true|none|

> 返回示例

> 成功

```json
{
  "code": 0,
  "message": "评论成功",
  "result": ""
}
```

```json
{
  "code": "13002",
  "message": "评论内容和评论文章不可以为空",
  "result": ""
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|



